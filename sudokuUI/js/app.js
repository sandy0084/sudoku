$(function() {
	
	$(document).on("click", "#sendValue", function(e) {
		var valuesArray = {};
		valuesArray["sudoku"] = {};
		
		$(".case").each(function(index) {
			var id =    $(this).attr('id');
			var value = $(this).find('input').val();
			
			if (value=="")
				value = "X";
			
			valuesArray["sudoku"][id] = value;
		});
		json = JSON.stringify(valuesArray);
		console.log(json);
	});

	$(document).on("click", "#remplirTest", function(e) {
		var jsonTest = '{ "sudoku" : { "00" : "1", "01" : "2", "02" : "3", "03" : "4", "04" : "5", "05" : "6", "06" : "7", "07" : "8", "08" : "9", "10" : "1", "11" : "2", "12" : "3", "13" : "4", "14" : "5", "15" : "6", "16" : "7", "17" : "8", "18" : "9", "20" : "1", "21" : "2", "22" : "3", "23" : "4", "24" : "5", "25" : "6", "26" : "7", "27" : "8", "28" : "9", "30" : "1", "31" : "2", "32" : "3", "33" : "4", "34" : "5", "35" : "6", "36" : "7", "37" : "8", "38" : "9", "40" : "1", "41" : "2", "42" : "3", "43" : "4", "44" : "5", "45" : "6", "46" : "7", "47" : "8", "48" : "9", "50" : "1", "51" : "2", "52" : "3", "53" : "4", "54" : "5", "55" : "6", "56" : "7", "57" : "8", "58" : "9", "60" : "1", "61" : "2", "62" : "3", "63" : "4", "64" : "5", "65" : "6", "66" : "7", "67" : "8", "68" : "9", "70" : "1", "71" : "2", "72" : "3", "73" : "4", "74" : "5", "75" : "6", "76" : "7", "77" : "8", "78" : "9", "80" : "1", "81" : "2", "82" : "3", "83" : "4", "84" : "5", "85" : "6", "86" : "7", "87" : "8", "88" : "9" } }';
		remplirSudoku(jsonTest);
	});	
	
	$(document).on("click", "#clear", function(e) {
		viderSudoku();
	});

	$(document).ready(function() {
		loadSudoku();
	});

	function loadSudoku(){
		var json = '{"sudoku":{"10":1,"11":"","12":8,"13":"","14":"","15":6,"16":"","17":"","18":"","20":"","21":4,"22":"","23":"","24":8,"25":"","26":"","27":"","28":"","30":"","31":1,"32":"","33":"","34":"","35":4,"36":3,"37":"","38":"","40":"","41":"","42":"","43":"","44":"","45":7,"46":"","47":1,"48":2,"50":"","51":2,"52":"","53":3,"54":"","55":8,"56":9,"57":"","58":"","60":8,"61":"","62":4,"63":"","64":6,"65":5,"66":"","67":"","68":1,"70":9,"71":"","72":"","73":"","74":7,"75":"","76":"","77":4,"78":3,"80":"","81":"","82":"","83":"","84":4,"85":"","86":5,"87":6,"88":"","00":3,"01":"","02":"","03":"","04":5,"05":"","06":"","07":2,"08":""}}';
		remplirSudoku(json);
	}
	
	function remplirSudoku(json) {
		var obj = JSON.parse(json);
		
		$(".case").each(function(index) {
			var id = $(this).attr('id');
			$(this).find('input').val(obj["sudoku"][id]);
		});
	}	
	
	function viderSudoku() {
		$(".case").each(function(index) {
			$(this).find('input').val("");
		});
	}
});
